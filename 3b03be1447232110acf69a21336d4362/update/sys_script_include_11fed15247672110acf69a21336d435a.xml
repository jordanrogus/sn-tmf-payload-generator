<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_648117_tmf_mock.Utils</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description>Generalized utils for the TMF Mock Payload Generator application</description>
        <name>Utils</name>
        <script><![CDATA[var Utils = Class.create();
Utils.prototype = {
    initialize: function() {},

    getRecordFromSysID(table, sys_id) {
        var gr = new GlideRecord(table);
        if (gr.get(sys_id)) {
            return gr;
        } else {
            return null;
        }
    },

	// table: The table the record to duplicate is on
	// sourceSysID: The record to duplicate
	// fieldMap: Object containing fields/values to usurp from the source record in the duplicated record. Example: fieldMap = {fieldName:"fieldValue", fieldName2:"fieldValue2"}
    duplicateRecord(table, sourceSysID, fieldMap) {
        var gr = new GlideRecord(table);
        gr.initialize();
        if (gr.get(sourceSysID)) {
			if(typeof fieldMap == "object"){
				for (var key in fieldMap) {
					if (fieldMap.hasOwnProperty(key)) {
						if(gr.isValidField(key)){
							gr[key] = fieldMap[key];
						}						
					}
				}
			}
            gr.number = "";
            return gr.insert();
        } else {
            return null;
        }
    },

    getRecords(tableName, encodedQuery) {
        var recordsGr = new GlideRecord(tableName);
        recordsGr.addEncodedQuery(encodedQuery);
        recordsGr.query();
        if (recordsGr.hasNext()) {
            return recordsGr;
        }
        return null;
    },

    type: 'Utils'
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-06-22 18:26:52</sys_created_on>
        <sys_id>11fed15247672110acf69a21336d435a</sys_id>
        <sys_mod_count>9</sys_mod_count>
        <sys_name>Utils</sys_name>
        <sys_package display_value="TMF Mock Payload Generator" source="x_648117_tmf_mock">3b03be1447232110acf69a21336d4362</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="TMF Mock Payload Generator">3b03be1447232110acf69a21336d4362</sys_scope>
        <sys_update_name>sys_script_include_11fed15247672110acf69a21336d435a</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-06-23 14:13:28</sys_updated_on>
    </sys_script_include>
</record_update>
